<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LaunchCtrl</title>
    <link rel="icon" type="image/png" href="/static/favicon.png">
    <script defer data-domain="launchctrl.ai" src="https://plausible.io/js/script.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .site-title { text-align:center; margin: 6px 0 20px 0; font-size: 34px; }
        .utility-row { display:flex; justify-content:flex-end; align-items:center; font-size:13px; color:#6b7280; gap: 8px; }
        .utility-row a { color:#2563eb; text-decoration:none; }
        .utility-row .sep { color:#9ca3af; }
        .hero-title { font-size: 26px; line-height: 1.25; color:#111827; text-align:center; margin: 8px 0 10px 0; }
        .hero-sub { text-align:left; color:#374151; margin: 0 0 16px 0; max-width: 780px; }
        .hero-how { text-align:left; color:#111827; margin: 8px 0 6px 0; text-decoration: underline; }
        .btn-row { display:flex; justify-content:center; gap:12px; align-items:center; margin: 6px 0 8px 0; }
        .btn-secondary { background: transparent; color:#111827; border:1px solid #e5e7eb; padding: 12px 22px; border-radius: 6px; font-size: 16px; text-decoration:none; cursor:pointer; }
        .btn-secondary:hover { background:#f3f4f6; }
        .chips { text-align:center; font-size: 13px; color:#6b7280; margin-bottom: 18px; }
        .limits-panel { background:#f8f9fa; border:1px solid #e5e7eb; border-radius:6px; padding:12px; color:#374151; }
        .limits-title { font-weight:600; margin:0 0 4px 0; }
        .limits-note { font-size:13px; color:#6b7280; margin-top:4px; }
        .header-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .quota-status {
            text-align: right;
        }
        .quota-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }
        .quota-ok {
            background: #d4edda;
            color: #155724;
        }
        .quota-warning {
            background: #fff3cd;
            color: #856404;
        }
        .quota-exceeded {
            background: #f8d7da;
            color: #721c24;
        }
        .verify-button {
            background: #28a745;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            text-decoration: none;
            font-size: 14px;
            display: inline-block;
        }
        .verify-button:hover {
            background: #218838;
        }
        .logout-button {
            background: #6c757d;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            text-decoration: none;
            font-size: 14px;
            display: inline-block;
        }
        .logout-button:hover {
            background: #5a6268;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }
        input[type="text"], input[type="number"], textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            box-sizing: border-box;
        }
        textarea {
            resize: vertical;
            min-height: 80px;
        }
        input[type="text"]:focus, input[type="number"]:focus, textarea:focus {
            outline: none;
            border-color: #007bff;
        }
        .form-row {
            display: flex;
            gap: 20px;
        }
        .form-row .form-group {
            flex: 1;
        }
        button {
            background: #007bff;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }
        button:hover {
            background: #0056b3;
        }
        button:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        /* Narrower submit button in the centered row */
        .btn-row button {
            width: auto;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        .help-text {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        .quota-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        .quota-info h3 {
            margin-top: 0;
            color: #1976d2;
        }

        /* Loading overlay */
        #loadingOverlay {
            position: fixed;
            inset: 0;
            background: rgba(255,255,255,0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }
        .loading-card {
            background: white;
            padding: 24px 24px 18px 24px;
            border-radius: 10px;
            box-shadow: 0 6px 24px rgba(0,0,0,0.12);
            width: min(520px, calc(100% - 40px));
        }
        .spinner {
            width: 36px;
            height: 36px;
            border: 4px solid #e9ecef;
            border-top-color: #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 12px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .stage-text {
            text-align: center;
            font-weight: 600;
            color: #333;
        }
        .sub-text {
            text-align: center;
            font-size: 13px;
            color: #666;
            margin-top: 8px;
        }
        .progress {
            height: 8px;
            background: #e9ecef;
            border-radius: 999px;
            overflow: hidden;
            margin-top: 12px;
        }
        .progress > div {
            height: 100%;
            width: 0%;
            background: #007bff;
            transition: width .5s ease;
        }
        /* Result card styles (shared with results page) */
        .result-card { border: 1px solid #ddd; border-radius: 8px; margin-bottom: 20px; overflow: hidden; background:#fff; }
        .result-header { background: #f8f9fa; padding: 15px; border-bottom: 1px solid #ddd; }
        .result-title { font-size: 18px; font-weight: 600; color: #333; margin: 0 0 5px 0; }
        .result-meta { font-size: 14px; color: #666; }
        .result-meta a { color: #007bff; text-decoration: none; }
        .result-meta a:hover { text-decoration: underline; }
        .result-content { padding: 20px; }
        .section { margin-bottom: 20px; }
        .section h3 { color: #333; margin-bottom: 10px; font-size: 16px; }
        .section-content { background: #f8f9fa; padding: 15px; border-radius: 6px; font-size: 14px; line-height: 1.5; }
        .confidence-score { display: inline-block; background: #28a745; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 600; }
        .tech-stack { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
        .tech-tag { background: #007bff; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; }
        .features-list { list-style: none; padding: 0; margin: 10px 0; }
        .features-list li { background: #e9ecef; padding: 8px 12px; margin-bottom: 5px; border-radius: 4px; font-size: 14px; }
        .copy-button { background: #28a745; color: #ffffff; border: none; padding: 4px 6px; border-radius: 4px; cursor: pointer; font-size: 11px; margin-left: 0; }
        .copy-button:hover { background: #218838; }
        .playbook-list { list-style: decimal; padding-left: 20px; }
        .playbook-item { margin-bottom: 15px; padding: 15px; background: #f8f9fa; border-radius: 6px; border-left: 4px solid #007bff; }
        .prompt-text { margin-bottom: 10px; line-height: 1.6; white-space: pre-wrap; }
        .copy-all-button { margin-top: 15px; }
        /* Example Idea Pack: left-align copy buttons (height unchanged) */
        .example-prompts .copy-button { margin-left: 0; }
        /* Compact idea list */
        .idea-list { display: flex; flex-direction: column; gap: 8px; }
        .idea-row { border: 1px solid #e5e7eb; border-radius: 6px; background: #fff; padding: 10px 12px; display: grid; grid-template-columns: 1fr auto; gap: 8px; align-items: start; }
        .idea-title { font-weight: 600; color: #111827; margin: 0; font-size: 15px; }
        .idea-meta { font-size: 12px; color: #6b7280; margin-top: 2px; }
        .idea-meta a { color: #2563eb; text-decoration: none; }
        .idea-meta a:hover { text-decoration: underline; }
        .idea-desc { font-size: 14px; color: #374151; margin-top: 6px; }
        .btn-small { background:#007bff; color:#fff; border:none; padding:6px 10px; border-radius:6px; cursor:pointer; font-size:12px; }
    </style>
</head>
<body>
    <div id="loadingOverlay">
        <div class="loading-card">
            <div class="spinner"></div>
            <div id="loadingStage" class="stage-text">Preparing…</div>
            <div class="progress"><div id="loadingBar"></div></div>
            <div class="sub-text">This takes about 30–60 seconds per post.</div>
        </div>
    </div>
    <div class="container">
        <div class="utility-row">
            {% if user_email %}
                <span>You’re signed in as {{ user_email }}</span>
                <span class="sep">·</span>
                <a href="/logout">Logout</a>
            {% else %}
                <span>You’re browsing as a guest.</span>
                <span class="sep">·</span>
                <a href="/verify">Verify email</a>
                <span class="sep">·</span>
                <a href="/signin">Sign in</a>
            {% endif %}
            <span class="sep">·</span>
            <span><strong>Usage:</strong> {{ current_usage }}/{{ limit }} today</span>
            <span class="sep">·</span>
            <a href="/feedback?from=/">Feedback</a>
        </div>
        <h1 class="site-title">LaunchCtrl</h1>
        <div class="hero">
            <div class="hero-title">Find real problems, identify solutions, and get the prompts to build them.</div>
            <div class="hero-how">How it works:</div>
            <div class="hero-sub">Enter in a subreddit name below to scrape posts for problems, generate a project idea, then get a set of prompts for Cursor so you can build the solution and ship it.</div>
        </div>
        
        <!-- Thin utility-only; usage counters removed from hero area -->
        
        

        <!-- Quota info demoted: tucked below form as subtle helper copy -->
        
        {% if error %}
        <div class="error">
            {{ error }}
        </div>
        {% endif %}
        
        {% if success %}
        <div class="success">
            {{ success }}
        </div>
        {% endif %}
        
        <form method="POST" action="/scrape" style="margin-top: 8px;">
            <div class="form-group">
                <label for="subreddit">Subreddit to analyze</label>
                <input 
                    type="text"
                    id="subreddit"
                    name="subreddit"
                    placeholder="e.g., smallbusiness"
                    value="{{ request.query_params.get('subreddit', '') }}"
                    required
                >
                <div class="help-text">Pick one subreddit where people with budgets ask for help. Try subreddits like smallbusiness, restaurantowners, or vibecoding.</div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="posts_per_subreddit">Posts to scan</label>
                    <input 
                        type="number" 
                        id="posts_per_subreddit" 
                        name="posts_per_subreddit" 
                        value="1" 
                        min="1" 
                        max="20"
                    >
                    <div class="help-text">Select between 1-5 recent posts.</div>
                </div>
                
                <div class="form-group">
                    <label for="comments_per_post">Comments per post</label>
                    <input 
                        type="number" 
                        id="comments_per_post" 
                        name="comments_per_post" 
                        value="20" 
                        min="1" 
                        max="50"
                    >
                    <div class="help-text">Pick between 10 - 40 comments to find real pain points.</div>
                </div>
            </div>
            
            <div class="btn-row">
                <button type="submit" {% if not can_scrape %}disabled{% endif %}>
                    {% if can_scrape %}
                        Find Problems
                    {% else %}
                        Quota Exceeded
                    {% endif %}
                </button>
            </div>
            {% if not user_email %}
            <div class="help-text" style="text-align:center; margin-top:8px;">
                Verify your email at the top of this page to unlock 15 scrapes/day!
            </div>
            {% endif %}
            
        </form>
        
        <!-- Example Idea Pack hidden -->
        

        <!-- Understated Daily Limits panel (no counters near hero) -->
        

        <!-- Slim LaunchCtrl note + email capture -->
        <div style="margin-top:16px; padding:12px; border:1px solid #FDE68A; border-radius:6px; background:#FFF8E1;">
            <div style="font-weight:600; color:#111827; margin:0 0 6px 0;">Note from Connor, the creator: Want to try the next phase?</div>
            <div style="color:#374151; font-size:14px; margin:0 0 10px 0;">Right now, this site just finds problems, and gives you prompts to build. I'm working to add automated web app creation and deployment next, so you can go from zero, to a working + deployed MVP that's ready to sell. Tag along below!</div>
            <form method="POST" action="/notify" style="display:flex; gap:8px; align-items:center;">
                <input type="email" name="email" placeholder="your@email.com" required style="flex:5; padding:10px 12px; border:1px solid #e5e7eb; border-radius:6px;" />
                <button type="submit" style="background:#f3f4f6; color:#111827; border:1px solid #e5e7eb; padding:10px 8px; border-radius:6px; cursor:pointer; white-space:nowrap; width:auto; flex:0 0 auto;">Notify me</button>
            </form>
            <div class="limits-note" style="margin-top:6px;">No spam. Just launch updates and early access.</div>
        </div>
        

        <!-- Simple Ideas Dashboard -->
        <div style="margin: 24px 0 10px 0;">
            <h3 style="margin: 0 0 10px 0; font-size: 20px;">{% if user_email %}My Ideas{% else %}Sample Ideas{% endif %}</h3>
            <!-- Quick chooser -->
            {% if ideas and ideas|length > 0 %}
            <form method="GET" action="/" style="margin: 0 0 12px 0; display:flex; gap:8px;">
                <select name="idea" style="flex:1; padding:10px; border:1px solid #e5e7eb; border-radius:6px;">
                    <option value="">— Select an idea to view —</option>
                    {% for idea in ideas %}
                        <option value="{{ idea.uuid }}" {% if selected_idea_uuid and idea.uuid == selected_idea_uuid %}selected{% endif %}>
                            {{ idea.title[:80] }} (r/{{ idea.subreddit }})
                        </option>
                    {% endfor %}
                </select>
                <button type="submit" style="white-space:nowrap; background:#007bff; border:none; color:#fff; padding:10px 14px; border-radius:6px; cursor:pointer;">View</button>
            </form>
            {% endif %}

            {% if selected_idea %}
            <div class="result-card">
                <div class="result-header">
                    <div class="result-title">{{ selected_idea.reddit.title }}</div>
                    <div class="result-meta">
                        <strong>r/{{ selected_idea.reddit.subreddit }}</strong> •
                        <a href="{{ selected_idea.reddit.url }}" target="_blank">View on Reddit</a>
                        {% if selected_idea.meta.scraped_at %}
                        • <span class="local-datetime" data-iso="{{ selected_idea.meta.scraped_at }}">{{ selected_idea.meta.scraped_at | pretty_date }}</span>
                        {% endif %}
                        {# confidence hidden #}
                    </div>
                </div>
                <div class="result-content">
                    <div class="section">
                        <h3>Problem Analysis</h3>
                        <div class="section-content">
                            {% if selected_idea.analysis.problem_description or selected_idea.analysis.opportunity_description %}
                            <div>{{ selected_idea.analysis.problem_description or selected_idea.analysis.opportunity_description }}</div>
                            {% endif %}
                            {% if selected_idea.analysis.target_market %}
                            <div style="margin-top: 10px;"><strong>Target Market:</strong> {{ selected_idea.analysis.target_market }}</div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="section">
                        <h3>Solution Summary</h3>
                        <div class="section-content">
                            {% if selected_idea.solution.solution_description %}
                            <div>{{ selected_idea.solution.solution_description }}</div>
                            {% endif %}
                            {% if selected_idea.solution.mvp_features %}
                            <div style="margin-top: 10px;">
                                <div><strong>MVP Features:</strong></div>
                                <ul class="features-list">
                                    {% for f in selected_idea.solution.mvp_features %}
                                    <li>{{ f }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {% endif %}
                        </div>
                    </div>

                    {% if selected_idea.cursor_playbook %}
                    <div class="section">
                        <h3>Cursor Playbook Prompts</h3>
                        <div class="section-content">
                            <p><em>Step-by-step prompts for building this MVP:</em></p>
                            <ol class="playbook-list">
                                {% for prompt in selected_idea.cursor_playbook %}
                                <li class="playbook-item">
                                    <div class="prompt-text">{{ prompt }}</div>
                                    <button class="copy-button" data-prompt-index="{{ loop.index }}" aria-label="Copy Prompt {{ loop.index }} to clipboard" type="button">Copy Prompt {{ loop.index }}</button>
                                </li>
                                {% endfor %}
                            </ol>
                            <button class="copy-button copy-all-button" id="copyAllPromptsBtn" aria-label="Copy all prompts to clipboard" type="button">Copy All Prompts</button>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endif %}
            {% if ideas and ideas|length > 0 %}
                <div class="idea-list">
                    {% for idea in ideas %}
                    <div class="idea-row">
                        <div>
                            <div class="idea-title">{{ idea.title }}</div>
                            <div class="idea-meta">r/{{ idea.subreddit }} • <a href="{{ idea.url }}" target="_blank">View on Reddit</a>{% if idea.created_at %} • <span class="local-datetime" data-iso="{{ idea.created_at }}">{{ idea.created_at | pretty_date }}</span>{% endif %}</div>
                            {% if idea.description %}
                            <div class="idea-desc">{{ idea.description }}</div>
                            {% endif %}
                        </div>
                        <form method="POST" action="/select" style="margin:0;">
                            <input type="hidden" name="idea_uuid" value="{{ idea.uuid }}" />
                            <button type="submit" class="btn-small" aria-label="View idea details">View idea</button>
                        </form>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                {% if user_email %}
                    <div class="help-text">No ideas yet. Run your first scrape to populate this list.</div>
                {% else %}
                    <div class="help-text">No sample ideas available.</div>
                {% endif %}
            {% endif %}
        </div>
    </div>
    <script id="selectedIdeaJson" type="application/json">{{ (selected_idea or {}) | tojson }}</script>
    <script>
    (function() {
        const form = document.querySelector('form[action="/scrape"]');
        if (!form) return;
        const overlay = document.getElementById('loadingOverlay');
        const stageEl = document.getElementById('loadingStage');
        const barEl = document.getElementById('loadingBar');
        const submitBtn = form.querySelector('button[type="submit"]');

        const stages = [
            'Preparing request…',
            'Fetching Reddit posts…',
            'Analyzing viability with AI…',
            'Designing targeted MVP…',
            'Generating Cursor playbook…',
            'Saving and rendering results…'
        ];

        form.addEventListener('submit', async function(e) {
            try {
                e.preventDefault();
                if (submitBtn) {
                    submitBtn.disabled = true;
                    submitBtn.textContent = 'Working…';
                }
                if (overlay) overlay.style.display = 'flex';

                // Progress pacing: ~55 seconds per post, up to 95% until server responds
                const postsInput = document.getElementById('posts_per_subreddit');
                const posts = Math.max(1, parseInt((postsInput && postsInput.value) || '1', 10) || 1);
                const totalMs = posts * 55000; // 55s per post
                const tickMs = 1000; // update once per second for a realistic, non-smooth feel
                const maxPct = 95; // leave headroom for server completion
                const totalTicks = Math.max(1, Math.floor(totalMs / tickMs));
                const inc = Math.max(1, maxPct / totalTicks); // ensure visible 1%+ per tick

                let pct = 5;
                barEl.style.width = pct + '%';
                stageEl.textContent = stages[0];

                const stageSpan = maxPct / stages.length;
                function tick() {
                    pct = Math.min(maxPct, pct + inc);
                    const stageIdx = Math.min(stages.length - 1, Math.floor(pct / stageSpan));
                    stageEl.textContent = stages[stageIdx];
                    barEl.style.width = pct + '%';
                }

                // Kick a first, quick tick so movement is visible immediately
                setTimeout(tick, 250);
                let timer = setInterval(tick, tickMs);

                // Submit via fetch to keep this page alive while we animate
                const fd = new FormData(form);
                const action = form.getAttribute('action') || '/scrape';
                const res = await fetch(action, { method: 'POST', body: fd });
                const html = await res.text();

                // Replace the document with the server-rendered results page
                document.open();
                document.write(html);
                document.close();
            } catch (err) {
                try {
                    if (overlay) overlay.style.display = 'none';
                    if (submitBtn) {
                        submitBtn.disabled = false;
                        submitBtn.textContent = 'Find Problems';
                    }
                } catch (_) { /* no-op */ }
                // Minimal error surface; console retains details
                console.error('Submit failed', err);
                alert('Something went wrong submitting your request. Please try again.');
            }
        });
    })();
    </script>
    <script>
    (function() {
        function fmt(dt) {
            const hours = dt.getHours();
            const h12 = ((hours % 12) || 12);
            const mins = String(dt.getMinutes()).padStart(2, '0');
            const ampm = hours < 12 ? 'am' : 'pm';
            const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
            return `${h12}:${mins}${ampm} on ${dt.getDate()}-${months[dt.getMonth()]}-${dt.getFullYear()}`;
        }
        function applyLocalTime(container) {
            const nodes = (container || document).querySelectorAll('.local-datetime[data-iso]');
            nodes.forEach(el => {
                const iso = el.getAttribute('data-iso');
                if (!iso) return;
                const date = new Date(iso);
                if (isNaN(date.getTime())) return;
                el.textContent = fmt(date);
            });
        }
        applyLocalTime();
        document.addEventListener('htmx:afterSwap', () => applyLocalTime());
    })();
    </script>
    <script>
    (function() {
        // Selected idea prompt copying – mirrors results page behavior
        var selected = null;
        try {
            var selNode = document.getElementById('selectedIdeaJson');
            selected = selNode ? JSON.parse(selNode.textContent || 'null') : null;
        } catch (e) { selected = null; }
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.setAttribute('role', 'status');
            notification.setAttribute('aria-live', 'polite');
            notification.textContent = message;
            notification.style.cssText = 'position: fixed; top: 20px; right: 20px; background: '
                + (type === 'success' ? '#28a745' : '#dc3545')
                + '; color: white; padding: 15px 20px; border-radius: 6px; z-index: 1000; font-weight: 600; box-shadow: 0 4px 12px rgba(0,0,0,0.15);';
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }
        function copyToClipboard(text, successMessage) {
            if (!text) return;
            navigator.clipboard.writeText(text).then(function() {
                showNotification(successMessage, 'success');
            }).catch(function(err) {
                console.error('Failed to copy: ', err);
                alert(successMessage + '\n\n' + text);
            });
        }
        // Delegate clicks for copy buttons to avoid inline JS
        document.addEventListener('click', function(e) {
            const btn = e.target.closest('button.copy-button');
            if (!btn) return;
            const idxAttr = btn.getAttribute('data-prompt-index');
            if (idxAttr && selected && selected.cursor_playbook) {
                const idx = parseInt(idxAttr, 10);
                if (!isNaN(idx) && idx > 0 && idx <= selected.cursor_playbook.length) {
                    const prompt = selected.cursor_playbook[idx - 1];
                    copyToClipboard(prompt, 'Prompt ' + idx + ' copied to clipboard!');
                }
            }
        });
        const copyAllBtn = document.getElementById('copyAllPromptsBtn');
        if (copyAllBtn) {
            copyAllBtn.addEventListener('click', function() {
                if (!selected || !selected.cursor_playbook) return;
                const all = selected.cursor_playbook.map(function(p, i) { return '=== PROMPT ' + (i+1) + ' ===\n' + p; }).join('\n\n');
                copyToClipboard(all, 'All prompts copied to clipboard!');
            });
        }
        // See example: open details and scroll into view
        const seeExampleBtn = document.getElementById('seeExampleBtn');
        const example = document.getElementById('example');
        if (seeExampleBtn && example) {
            seeExampleBtn.addEventListener('click', function(ev) {
                ev.preventDefault();
                example.open = true;
                try { seeExampleBtn.setAttribute('aria-expanded', 'true'); } catch (_) {}
                example.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
        }

        // Copy example prompts: per-prompt and all
        const examplePrompts = [
            "You are building an MVP for a tool that extracts Unity game assets using AssetRipper, then analyzes them with AI to explain game mechanics, systems, and project structure. Target users are Unity developers, game designers, modders, and educators aiming to learn from or replicate existing game projects. The chosen MVP is a minimal web service with endpoints to upload a Unity asset bundle, run AssetRipper and an AI pipeline, and return a basic analysis of one scene's hierarchy and mechanics. Respond 'Ready' if you understand and will wait for detailed tasks.",
            "Initialize a new Node.js and TypeScript project in an empty directory. Set up Git with git init, create a README.md stub summarizing the project mission, add an MIT LICENSE, install TypeScript, Express, Prisma CLI, and other dependencies. Configure basic tooling: ESLint for linting, Prettier for formatting, Husky pre-commit hooks, and add a .env.example file. Show the shell commands you would run and the resulting file and folder structure.",
            "Using Prisma, define the data model for the MVP. Include models for AssetUpload (id, filePath, status, createdAt), Scene (id, name, assetUploadId), GameObject, Component, and AnalysisResult. Create the schema.prisma file with these models, then run prisma migrate to generate the initial migration. Provide the full schema.prisma file and the generated SQL migration.",
            "Implement the core backend logic in TypeScript with Express. Create endpoints: POST /upload to accept a Unity asset bundle, save it, start AssetRipper extraction, and record metadata; POST /analyze/:uploadId to run the AI pipeline on extracted data and save results; GET /analysis/:id to retrieve the analysis result. For each endpoint, write Jest unit-test stubs (without full implementation). Show the key files (server.ts, routes, controllers, and test stubs).",
            "Create a minimal CLI tool in TypeScript to demo the flow locally. Implement a script (cli.ts) that takes a file path argument, calls POST /upload, polls or waits for analysis to complete, and prints the JSON result to the console. Provide the code for the CLI script and instructions to run it against a local dev server.",
            "Write automated tests using Jest. Add unit tests for core functions (asset extraction handler and AI pipeline caller) and one happy-path integration test using supertest: spin up the Express server, upload a sample asset bundle fixture, mock AssetRipper and AI calls, and assert that a valid analysis result is returned. Provide the test files and any test configuration.",
            "Provide detailed instructions for running the project locally. Include steps to install dependencies (npm install), copy .env.example to .env and configure variables, run prisma migrate, start the dev server (npm run dev), use the CLI to upload and analyze a sample bundle, and run all tests (npm test)."
        ];
        document.addEventListener('click', function(e) {
            const btn = e.target.closest('button.copy-button[data-example-index]');
            if (!btn) return;
            const idxAttr = btn.getAttribute('data-example-index');
            const idx = parseInt(idxAttr, 10);
            if (!isNaN(idx) && idx > 0 && idx <= examplePrompts.length) {
                copyToClipboard(examplePrompts[idx - 1], 'Example Prompt ' + idx + ' copied to clipboard!');
            }
        });
        // Removed Copy All button per request
    })();
    </script>
</body>
</html> 